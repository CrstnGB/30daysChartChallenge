<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Cristian Guerrero Balber">

<title>30DaysChanllenge</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="30DaysChallenge_files/libs/clipboard/clipboard.min.js"></script>
<script src="30DaysChallenge_files/libs/quarto-html/quarto.js"></script>
<script src="30DaysChallenge_files/libs/quarto-html/popper.min.js"></script>
<script src="30DaysChallenge_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="30DaysChallenge_files/libs/quarto-html/anchor.min.js"></script>
<link href="30DaysChallenge_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="30DaysChallenge_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="30DaysChallenge_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="30DaysChallenge_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="30DaysChallenge_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">30DaysChanllenge</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Cristian Guerrero Balber </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="categoría-comparisons" class="level2">
<h2 class="anchored" data-anchor-id="categoría-comparisons">Categoría: “Comparisons”</h2>
<section id="día-1-part-to-whole" class="level3">
<h3 class="anchored" data-anchor-id="día-1-part-to-whole">Día 1: Part-to-Whole</h3>
<iframe title="¿Cómo se distribuye la riqueza mundial por sectores?" aria-label="Donut Chart" id="datawrapper-chart-N4Zj2" src="https://datawrapper.dwcdn.net/N4Zj2/1/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="608" data-external="1">
</iframe>
<script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>
<p><strong>Audiencia:</strong> Grupo de estudiantes de economía<br>
<strong>Objetivo:</strong> Mostrar los sectores industriales donde se genera más riqueza con todas las posibilidades de estrategia que ello conlleva, como la inversión o el estudio de un sector u otro.<br>
<strong>Visualización:</strong> Herramienta Datawrapper para realizar un gráfico de rosquilla, convirtiendo los valores netos a porcentajes.<br>
<strong>Conjunto de datos:</strong> Se realiza una agregación por sector industrial sumando los valores netos por cada registro. La fuente de datos es la siguiente: <a href="#0" class="uri">https://www.kaggle.com/datasets/muhammadehsan02/top-1000-wealthiest-people-in-the-world/data</a></p>
</section>
<section id="día-2-neo" class="level3">
<h3 class="anchored" data-anchor-id="día-2-neo">Día 2: Neo</h3>
<iframe title="¿Quién quiere ser millonario? ¡Top 10 de las personas más ricas del mundo en 2024!" aria-label="Bar Chart" id="datawrapper-chart-n7LNH" src="https://datawrapper.dwcdn.net/n7LNH/2/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="379" data-external="1">
</iframe>
<script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>
<p><strong>Audiencia:</strong> Grupo de estudiantes de economía<br>
<strong>Objetivo:</strong> Informar sobre quiénes son las personas que dominan el planeta económicamente y las cantidades de sus riquezas.<br>
<strong>Visualización:</strong> Herramienta Datawrapper para realizar un gráfico de barras horizontal.<br>
<strong>Conjunto de datos:</strong> De nuevo, el origen de los datos es el mismo que antes: <a href="#0" class="uri">https://www.kaggle.com/datasets/muhammadehsan02/top-1000-wealthiest-people-in-the-world/data</a>. Se realiza una agregación por nombre de persona y sumando sus riquezas, las cuales pueden proceder de diferentes sectores industriales y, por lo tanto, la misma persona puede aparecer en más de un registro.</p>
</section>
<section id="día-3-makeover" class="level3">
<h3 class="anchored" data-anchor-id="día-3-makeover">Día 3: Makeover</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="\external_images\D3.png" class="img-fluid figure-img"></p>
<figcaption>Gráfico generado por IA - DALL-E a través de ChatGPT</figcaption>
</figure>
</div>
<p><strong>Audiencia:</strong> Grupo de estudiantes de economía<br>
<strong>Objetivo:</strong> Mostrar los sectores industriales donde se genera más riqueza con todas las posibilidades de estrategia que ello conlleva, como la inversión o el estudio de un sector u otro.<br>
<strong>Visualización:</strong> En esta ocasión, se crea un gráfico muy visual y espectacular usando IA Generativa en base a la gráfica del primer día. El gran inconveniente de este tipo de herramientas para la creación de gráficas es el bajo control que se tiene sobre lo que aparece en la imagen por mucho que se refina el <em>prompt</em>. Por ejemplo, se ha distorsionado algunas etiquetas de sectores así como los valores asociados. Es decir, es una herramienta muy potente y espectacular pero aún mejorable desde el punto de vista del control.<br>
<strong>Conjunto de datos:</strong> Se utiliza como <em>prompt</em> la imagen gráfica del día 1 (Part-to-whole) además del siguiente texto: “Create an image of a pie chart with an original style, including 3D figures related to each industrial sector. The sectors should be represented as follows: Technology (35%) with images such as computers or smartphones, Retail (23%) with images like shopping bags or a storefront, Manufacturing (10%) with icons like gears or a factory, Telecommunications (6%) with symbols such as satellite dishes or cell towers, Media (6%) with elements like film reels or cameras, and Other (22%) with assorted icons that represent various industries. Include the labels with words of sectors and percentages and ensure that they are clear and undistorted.”</p>
</section>
<section id="día-4-waffle" class="level3">
<h3 class="anchored" data-anchor-id="día-4-waffle">Día 4: Waffle</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instalar y cargar los paquetes</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(waffle)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'waffle' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ggplot2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"datasets</span><span class="sc">\\</span><span class="st">Top_1000_wealthiest_people_d4.csv"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Se convierten los datos a un vector nombrado</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>valores <span class="ot">&lt;-</span> (<span class="fu">setNames</span>(dataset<span class="sc">$</span>Net.Worth..in.billions., dataset<span class="sc">$</span>Company))</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el gráfico de waffle</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>waffle_chart <span class="ot">&lt;-</span> <span class="fu">waffle</span>(valores, <span class="at">rows =</span> <span class="dv">10</span>, <span class="at">size =</span><span class="dv">1</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">colors =</span> <span class="fu">rainbow</span>(<span class="fu">length</span>(valores))) <span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de la riqueza mundial por empresas"</span>, <span class="at">subtitle =</span> <span class="st">"Gráfico de waffle de 100 unidades"</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar el gráfico</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>waffle_chart</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="30DaysChallenge_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Audiencia:</strong> Grupo de estudiantes de economía<br>
<strong>Objetivo:</strong> Mostrar la distribución de empresas que generan más riquezas a las personas más ricas del planeta. Cuanto más riqueza genera, más cuadrados de color tiene asociado.<br>
<strong>Visualización:</strong> Se utiliza un waffle chart utilizando la librería de R “waffle”.<br>
<strong>Conjunto de datos:</strong> El origen de los datos sigue siendo el mismo: <a href="#0" class="uri">https://www.kaggle.com/datasets/muhammadehsan02/top-1000-wealthiest-people-in-the-world/data</a>. En esta ocasión, se realiza una agregación por empresas sumando el valor de la riqueza. Además, se normalizan los datos calculando la proporción sobre 100 de cada empresa y convirtiéndolas en un número entero para obtener este tipo de dato, necesario en tipo y forma para este tipo de gráfica.</p>
</section>
<section id="día-5-diverging" class="level3">
<h3 class="anchored" data-anchor-id="día-5-diverging">Día 5: Diverging</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos de ejemplo</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"datasets</span><span class="sc">\\</span><span class="st">Inequality in Income Spain Comparison_d5.csv"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>Desigualdad <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(datos<span class="sc">$</span>Inequality.in.income..<span class="fl">2021.</span> <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"Mayor desigualdad que España"</span>, <span class="st">"Menor desigualdad que España"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el gráfico</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> datos, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, Inequality.in.income..<span class="fl">2021.</span>), </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">y =</span> Inequality.in.income..<span class="fl">2021.</span>, </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                          <span class="at">fill =</span> Desigualdad)) <span class="sc">+</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span>  </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"pink"</span>, <span class="st">"lightblue"</span>)) <span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"¿Qué países enfrentan una mayor desigualdad de ingresos en comparación con España?"</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"País"</span>,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Diferencia de GINI con respecto a España"</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Diferencia de desigualdad en ingresos"</span>) <span class="sc">+</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="dv">100</span>, <span class="st">"lines"</span>),</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>, <span class="at">face =</span> <span class="st">"bold"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="30DaysChallenge_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<p><strong>Audiencia:</strong> Grupo de estudiantes de economía<br>
<strong>Objetivo:</strong> Concienciar de la posición que ocupa España con respecto al resto de países del mundo en relación a la desigualdad de ingresos de sus habitantes.<br>
<strong>Visualización:</strong> Se utiliza la librería “ggplot2” de R. El gráfico elegido es un gráfico horizontal de barras modificando los colores en función de si es mejor o peor el resultado en comparación con España.<br>
<strong>Conjunto de datos:</strong> <a href="https://www.kaggle.com/datasets/iamsouravbanerjee/inequality-in-income-across-the-globe" class="uri">https://www.kaggle.com/datasets/iamsouravbanerjee/inequality-in-income-across-the-globe</a>. Se modifica la columna “Inequality in income (2021)”, donde se muestra el GINI por país, para calcular cada una con respecto a España, restándole el valor GINI de España a cada valor GINI del resto de los países. De esta manera, se consigue el efecto deseado y se puede realizar una comparación con el país de interés.</p>
</section>
<section id="día-6-oecd-data-day" class="level3">
<h3 class="anchored" data-anchor-id="día-6-oecd-data-day">Día 6: OECD (data day)</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="\external_images\D6.png" class="img-fluid figure-img"></p>
<figcaption>Gráfico generado en PowerBI</figcaption>
</figure>
</div>
<p><strong>Audiencia:</strong> Grupo de estudiantes de economía<br>
<strong>Objetivo:</strong> Resaltar aquellos continentes con una mayor desigualdad en cuanto a ingresos en sus países.<br>
<strong>Visualización:</strong> Se realiza a través de <strong>PowerBI</strong>. Se usa una gráfica de embudo con un degradado de colores para mostrar los resultados de “peor” (mayor GINI promedio) a “mejor” (menor GINI promedio).<br>
<strong>Conjunto de datos:</strong> Se usa el mismo dataset del día anterior: <a href="#0" class="uri">https://www.kaggle.com/datasets/iamsouravbanerjee/inequality-in-income-across-the-globe</a>. En esta ocasión, se ha realizado el promedio de todos los paises por continente y se ha ordenado de mayor a menor.</p>
</section>
</section>
<section id="categoría-distributions" class="level2">
<h2 class="anchored" data-anchor-id="categoría-distributions">Categoría: “Distributions”</h2>
<section id="día-7-hazards" class="level3">
<h3 class="anchored" data-anchor-id="día-7-hazards">Día 7: Hazards</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="30DaysChallenge_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Audiencia:</strong> Grupo de Médicos del Hospital Universitario Puerta del Mar en Cádiz, España<br>
<strong>Objetivo:</strong> Se pretende mostrar la distribución de número acumulado de causas de muerte desde 1990 hasta 2019 con el fin de determinar si existen ciertas enfermedades que, en comparación con el resto, tienen una incidencia mucho más alta o baja.<br>
<strong>Visualización:</strong> Se utiliza la librería <strong>matplotlib.pyplot</strong> junto con <strong>seaborn</strong> de <strong>python</strong>. Se escoge un gráfico <strong>boxplot</strong>, ideal para identificar visualmente outliers.<br>
<strong>Conjunto de datos:</strong> <a href="https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019" class="uri">https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019</a>. Previo al graficado de datos, se ha de calcular programáticamente los outliers para que puedan ser etiquetados en el boxplot. De esta manera, la audiencia puede identificar fácilmente aquellas enfermedades que están fuera de la normalidad.</p>
</section>
<section id="día-8-circular" class="level3">
<h3 class="anchored" data-anchor-id="día-8-circular">Día 8: Circular</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="30DaysChallenge_files/figure-html/unnamed-chunk-4-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Audiencia:</strong> Grupo de Médicos del Hospital Universitario Puerta del Mar en Cádiz, España<br>
<strong>Objetivo:</strong> Focalizar los esfuerzos de investigación para las enfermedades más relevantes<br>
<strong>Visualización:</strong> Se utiliza ggplot2 con la librería ggrepel. Con esto se consigue un gráfico de sectores con el etiquetado fuera del propio gráfico con una visualización, como resultado, más clara.<br>
<strong>Conjunto de datos:</strong> Origen: <a href="https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019" class="uri">https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019</a>. Se necesita transformar el dataset original cambiando la estructura, pasando las columnas de las enfermedades a una sola columna como “causes_of_death” y sus valores a otra columna llamada “number_of_people”. A partir de aquí, se realizan transformaciones varias de limpieza, agregaciones y sumas, para obtener los valores mostrados. Se comprueba que España tiene una distribución similar a la mundial, dado que las tres grandes enfermedades que afectan a este país son las mismas.</p>
</section>
<section id="día-9-majorminor" class="level3">
<h3 class="anchored" data-anchor-id="día-9-majorminor">Día 9: Major/Minor</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="\external_images\D9.png" class="img-fluid figure-img"></p>
<figcaption>Gráfico generado en PowerBI</figcaption>
</figure>
</div>
<p><strong>Audiencia:</strong> Grupo de Médicos del Hospital Universitario Puerta del Mar en Cádiz, España<br>
<strong>Objetivo:</strong> &nbsp;Mostrar los países con mayor y menor incidencia en muertes debido a neoplasia (cáncer) en 2019 con el fin de reflexionar sobre qué puede llevar a dichos países a alcanzar estas cifras. <strong>Visualización:</strong> <strong>PowerBI</strong>. Se escoge dos visualizaciones de tipo <strong>Tarjeta</strong> para mostrar el país así como la cifra de incidencias por cada 100 mil habitantes.<br>
<strong>Conjunto de datos:</strong> <a href="https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019" class="uri">https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019</a>, <a href="https://worldpopulationreview.com/" class="uri">https://worldpopulationreview.com/</a>. Para poder realizar dicha visualización, con PowerBI se importan los datos preprocesados desde Python realizando un derretido de las columnas de enfermedades. Luego, se crean campos calculados para mostrar los datos deseados, el país con mayor/menor número de muertes por cada 100 mil habitantes y la cifra. Además, se añaden ciertos filtros para que solo se tenga en cuenta la enfermedad de neoplasia y el año 2019 (fecha más actual de la que se tienen datos).</p>
</section>
<section id="día-10-physical" class="level3">
<h3 class="anchored" data-anchor-id="día-10-physical">Día 10: Physical</h3>
<iframe title="Muertes por enfermedades cardiovasculares por país en 2010" aria-label="Map" id="datawrapper-chart-izgyy" src="https://datawrapper.dwcdn.net/izgyy/2/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="458" data-external="1">
</iframe>
<script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>
<script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>
<p><strong>Audiencia:</strong> Grupo de Médicos del Hospital Universitario Puerta del Mar en Cádiz, España<br>
<strong>Objetivo:</strong> Transmitir una visión general de la distribución de afección de la enfermedad con la incidencia más alta de muertes en el planeta.<br>
<strong>Visualización:</strong> <strong>Datawrapper</strong>. Así como los mapas físicos muestran con colores las propiedades físicas de un mapa, se utiliza el mismo concepto para mostrar la incidencia de muertes por enfermedades cardiovasculares por país (por cada 100 mil habitantes).<br>
<strong>Conjunto de datos:</strong> <a href="https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019" class="uri">https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019</a>, <a href="https://worldpopulationreview.com/" class="uri">https://worldpopulationreview.com/</a>. Para poder realizar dicha visualización, primero se preprocesan los datos con Python realizando un derretido de las columnas de enfermedades. Luego, se importan los datos a PowerBI, donde se realizará una conexión entre dos tablas de dos fuentes de datos diferentes (mencionadas anteriormente). Estas tienen como campo identificativo el país. A partir de aquí, se puede añadir la cantidad de habitantes por país y realizar el cálculo de número de muertes por cada 100 mil habitantes. Además, se añaden ciertos filtros para que solo se tenga en cuenta las enfermedades cardiovasculares y el año 2010 (fecha más actual de la que se tienen datos para combinar en ambos datasets). Una vez se preprocesan los datos, se importan a Datawrapper para poder crear el mapa interactivo y poder embeberlo en RStudio con Quarto.</p>
</section>
<section id="día-11-mobile-friendly" class="level3">
<h3 class="anchored" data-anchor-id="día-11-mobile-friendly">Día 11: Mobile-friendly</h3>
<p><strong>Audiencia:</strong> Grupo de Médicos del Hospital Universitario Puerta del Mar en Cádiz, España<br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong> <a href="https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019" class="uri">https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019</a></p>
</section>
<section id="día-12-reuters-graphics-theme-day" class="level3">
<h3 class="anchored" data-anchor-id="día-12-reuters-graphics-theme-day">Día 12: Reuters Graphics (theme day)</h3>
<iframe title="Evolución de causas de muertes a nivel mundial desde 1990 hasta 2019" aria-label="Interactive line chart" id="datawrapper-chart-DQaw5" src="https://datawrapper.dwcdn.net/DQaw5/5/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="445" data-external="1">
</iframe>
<script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>
<p><strong>Audiencia:</strong> Grupo de Médicos del Hospital Universitario Puerta del Mar en Cádiz, España<br>
<strong>Objetivo:</strong> Reflexionar sobre qué es lo que está ocurriendo en el mundo para que el número de fallecidos mundiales a causa de ciertas enfermedades haya aumentado en las últimas décadas.<br>
<strong>Visualización: Datawrapper</strong>. Se usa un gráfico de líneas para visualizar la evolución de las enfermedades. Al usar esta herramienta embebida, se da la posibilidad a la audiencia de revisar los datos de forma interactiva.<br>
<strong>Conjunto de datos:</strong> <a href="#0" class="uri">https://www.kaggle.com/datasets/madhurpant/world-deaths-and-causes-1990-2019</a>. Se preparan los datos eliminando las columnas de “country” y de “code”. Además, se realiza una agrupación por “year” para graficar la evolución.</p>
</section>
</section>
<section id="categoría-relationships" class="level2">
<h2 class="anchored" data-anchor-id="categoría-relationships">Categoría: “Relationships”</h2>
<section id="día-13-family" class="level3">
<h3 class="anchored" data-anchor-id="día-13-family">Día 13: Family</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-14-heatmap" class="level3">
<h3 class="anchored" data-anchor-id="día-14-heatmap">Día 14: Heatmap</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-15-historical" class="level3">
<h3 class="anchored" data-anchor-id="día-15-historical">Día 15: Historical</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-16-weather" class="level3">
<h3 class="anchored" data-anchor-id="día-16-weather">Día 16: Weather</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-17-networks" class="level3">
<h3 class="anchored" data-anchor-id="día-17-networks">Día 17: Networks</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-18-asian-development-bank-data-day" class="level3">
<h3 class="anchored" data-anchor-id="día-18-asian-development-bank-data-day">Día 18: Asian Development Bank (data day)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>altura<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">180</span>, <span class="dv">175</span>, <span class="dv">190</span>, <span class="dv">189</span>, <span class="dv">180</span>, <span class="dv">179</span>, <span class="dv">165</span>, <span class="dv">158</span>, <span class="dv">169</span>, <span class="dv">175</span>, <span class="dv">150</span>, <span class="dv">170</span>, <span class="dv">195</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>peso <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">80</span>,<span class="dv">75</span>,<span class="dv">85</span>,<span class="dv">90</span>,<span class="dv">87</span>,<span class="dv">86</span>,<span class="dv">65</span>,<span class="dv">67</span>,<span class="dv">70</span>,<span class="dv">54</span>,<span class="dv">68</span>,<span class="dv">70</span>,<span class="dv">90</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(peso <span class="ot">&lt;-</span> peso, altura <span class="ot">&lt;-</span> altura)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> datos, <span class="fu">aes</span>(<span class="at">x =</span> altura, <span class="at">y =</span> peso, <span class="at">color =</span> <span class="st">"red"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="30DaysChallenge_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
</section>
<section id="categoría-timeseries" class="level2">
<h2 class="anchored" data-anchor-id="categoría-timeseries">Categoría: “Timeseries”</h2>
<section id="día-19-dinosaurs" class="level3">
<h3 class="anchored" data-anchor-id="día-19-dinosaurs">Día 19: Dinosaurs</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-20-correlation" class="level3">
<h3 class="anchored" data-anchor-id="día-20-correlation">Día 20: Correlation</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-21-green-energy" class="level3">
<h3 class="anchored" data-anchor-id="día-21-green-energy">Día 21: Green Energy</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-22-mobility" class="level3">
<h3 class="anchored" data-anchor-id="día-22-mobility">Día 22: Mobility</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-23-tiles" class="level3">
<h3 class="anchored" data-anchor-id="día-23-tiles">Día 23: Tiles</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-24-ilo-region-for-africa-data-day" class="level3">
<h3 class="anchored" data-anchor-id="día-24-ilo-region-for-africa-data-day">Día 24: ILO Region for Africa (data day)</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
</section>
<section id="categoría-uncertainties" class="level2">
<h2 class="anchored" data-anchor-id="categoría-uncertainties">Categoría: “Uncertainties”</h2>
<section id="día-25-global-change" class="level3">
<h3 class="anchored" data-anchor-id="día-25-global-change">Día 25: Global Change</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-26-ai" class="level3">
<h3 class="anchored" data-anchor-id="día-26-ai">Día 26: AI</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-27-goodbad" class="level3">
<h3 class="anchored" data-anchor-id="día-27-goodbad">Día 27: Good/Bad</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-28-trend" class="level3">
<h3 class="anchored" data-anchor-id="día-28-trend">Día 28: Trend</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-29-blacknwhite" class="level3">
<h3 class="anchored" data-anchor-id="día-29-blacknwhite">Día 29: Black’n’White</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
</section>
<section id="día-30-fivethirtyeight-theme-day" class="level3">
<h3 class="anchored" data-anchor-id="día-30-fivethirtyeight-theme-day">Día 30: FiveThirtyEight (theme day)</h3>
<p><strong>Audiencia:</strong><br>
<strong>Objetivo:</strong><br>
<strong>Visualización:</strong><br>
<strong>Conjunto de datos:</strong></p>
<script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>
<iframe title="Net Worth (in billions) by Industry" aria-label="Bar Chart" id="datawrapper-chart-SpQmI" src="https://datawrapper.dwcdn.net/SpQmI/1/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="395" data-external="1">
</iframe>
<script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>